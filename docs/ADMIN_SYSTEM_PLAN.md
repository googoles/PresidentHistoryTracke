# ê³µì•½ ê´€ë¦¬ ë° ë‰´ìŠ¤ ì‹œìŠ¤í…œ ê³„íš

## ğŸ“Š í˜„ì¬ ìƒí™©

### ë¬¸ì œì 
- ê³µì•½ì´ 1~2ê°œë§Œ ìˆëŠ” í›„ë³´ì ë°œê²¬ (ì´ 5ëª…)
  - ê°•ìŠ¹ê·œ (í™ì„±êµ°ì˜ˆì‚°êµ°) - 1ê°œ
  - ê¹€ì›ì´ (ëª©í¬ì‹œ) - 1ê°œ
  - ë°±í˜œë ¨ (ìˆ˜ì›ì‹œì„) - 1ê°œ
  - ë…¸ì¢…ë©´ (ë¶€í‰êµ¬ê°‘) - 1ê°œ
  - ì´ì¬ì • (ì•ˆì–‘ì‹œë™ì•ˆêµ¬ì„) - 1ê°œ
- ê³µì•½ë³„ ê´€ë ¨ ë‰´ìŠ¤ ê¸°ëŠ¥ ì—†ìŒ

## ğŸ¯ ëª©í‘œ

1. **ê³µì•½ ë°ì´í„° ê´€ë¦¬**
   - ê³µì•½ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ
   - ê³µì•½ ìƒíƒœ ì—…ë°ì´íŠ¸
   - ê³µì•½ ì§„í–‰ë¥  ê´€ë¦¬

2. **ë‰´ìŠ¤ ì—°ë™**
   - ê³µì•½ë³„ ê´€ë ¨ ë‰´ìŠ¤ ì¶”ê°€
   - ë‰´ìŠ¤ ìë™/ìˆ˜ë™ ìˆ˜ì§‘
   - ë‰´ìŠ¤ ë§í¬ ë° ìš”ì•½ í‘œì‹œ

---

## ğŸ“ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ í™•ì¥

### 1. pledge_news í…Œì´ë¸” (ì‹ ê·œ)

```sql
CREATE TABLE pledge_news (
    news_id INTEGER PRIMARY KEY AUTOINCREMENT,
    pledge_id INTEGER NOT NULL,
    title VARCHAR(500) NOT NULL,
    url VARCHAR(1000) NOT NULL,
    source VARCHAR(100),          -- ì¶œì²˜ (í•œê²¨ë ˆ, ì¡°ì„ ì¼ë³´, etc.)
    published_date TIMESTAMP,
    summary TEXT,                 -- ë‰´ìŠ¤ ìš”ì•½
    sentiment VARCHAR(20),        -- positive/neutral/negative
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_by VARCHAR(100),      -- admin ë˜ëŠ” bot
    FOREIGN KEY (pledge_id) REFERENCES pledges(pledge_id) ON DELETE CASCADE
);

CREATE INDEX idx_pledge_news_pledge_id ON pledge_news(pledge_id);
CREATE INDEX idx_pledge_news_published_date ON pledge_news(published_date DESC);
```

### 2. admin_users í…Œì´ë¸” (ì‹ ê·œ)

```sql
CREATE TABLE admin_users (
    user_id UUID PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    role VARCHAR(50) DEFAULT 'editor',  -- admin, editor, viewer
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_login TIMESTAMP
);
```

### 3. audit_log í…Œì´ë¸” (ì‹ ê·œ)

```sql
CREATE TABLE audit_log (
    log_id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id UUID,
    action VARCHAR(50) NOT NULL,      -- CREATE, UPDATE, DELETE
    table_name VARCHAR(50) NOT NULL,  -- pledges, pledge_news
    record_id INTEGER,
    old_value TEXT,
    new_value TEXT,
    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES admin_users(user_id)
);
```

---

## ğŸ›  êµ¬í˜„ ë°©ì•ˆ

### Option 1: Supabase Admin (ì¶”ì²œ)
**ì¥ì :**
- Supabase Authë¡œ ì¸ì¦ ì²˜ë¦¬
- Row Level Securityë¡œ ê¶Œí•œ ê´€ë¦¬
- Realtimeìœ¼ë¡œ ìë™ ì—…ë°ì´íŠ¸
- API ìë™ ìƒì„±

**êµ¬í˜„ ìˆœì„œ:**
1. Supabaseì— ìƒˆ í…Œì´ë¸” ìƒì„± (`pledge_news`, `admin_users`, `audit_log`)
2. RLS ì •ì±… ì„¤ì • (adminë§Œ ìˆ˜ì • ê°€ëŠ¥)
3. Admin Dashboard UI êµ¬í˜„
4. Supabase Auth ì—°ë™

### Option 2: ì§ì ‘ Admin API êµ¬í˜„
**ì¥ì :**
- ì™„ì „í•œ ì œì–´
- ì»¤ìŠ¤í…€ ë¡œì§ ê°€ëŠ¥

**ë‹¨ì :**
- ê°œë°œ ì‹œê°„ ì¦ê°€
- ë³´ì•ˆ ì§ì ‘ ê´€ë¦¬

---

## ğŸ¨ Admin Dashboard UI ì„¤ê³„

### 1. ê³µì•½ ê´€ë¦¬ í˜ì´ì§€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admin Dashboard - ê³µì•½ ê´€ë¦¬                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ê²€ìƒ‰] [í•„í„°: í›„ë³´ì/ì§€ì—­/ì •ë‹¹] [ê³µì•½ 1ê°œ í›„ë³´ë§Œ] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ê°•ìŠ¹ê·œ (í™ì„±êµ°ì˜ˆì‚°êµ°) - êµ­ë¯¼ì˜í˜                  â”‚
â”‚ â”œâ”€ ê³µì•½ 1ê°œ âš ï¸                                   â”‚
â”‚ â””â”€ [ê³µì•½ ì¶”ê°€] [ê³µì•½ ìˆ˜ì •]                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ê¹€ì›ì´ (ëª©í¬ì‹œ) - ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹                    â”‚
â”‚ â”œâ”€ ê³µì•½ 1ê°œ âš ï¸                                   â”‚
â”‚ â””â”€ [ê³µì•½ ì¶”ê°€] [ê³µì•½ ìˆ˜ì •]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ê³µì•½ ìƒì„¸ í¸ì§‘ ëª¨ë‹¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ê³µì•½ í¸ì§‘                          [X]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì œëª©: [_____________________________]       â”‚
â”‚ ë¶„ì•¼: [ì„ íƒ: êµìœ¡/ë³µì§€/êµí†µ/...]            â”‚
â”‚ ë‚´ìš©: [___________________________          â”‚
â”‚        ___________________________]         â”‚
â”‚ ìƒíƒœ: [â—‹ ì¤€ë¹„ì¤‘ â—‹ ì§„í–‰ì¤‘ â—‹ ì™„ë£Œ]           â”‚
â”‚ ì§„í–‰ë¥ : [â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡] 50%                â”‚
â”‚                                             â”‚
â”‚ ê´€ë ¨ ë‰´ìŠ¤:                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚ â”‚ + ë‰´ìŠ¤ ì¶”ê°€                  â”‚            â”‚
â”‚ â”‚ - [ì‚­ì œ] "ê´€ë ¨ ë‰´ìŠ¤ ì œëª©..."  â”‚            â”‚
â”‚ â”‚   ì¶œì²˜: í•œê²¨ë ˆ | 2025-10-01  â”‚            â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                             â”‚
â”‚          [ì·¨ì†Œ]  [ì €ì¥]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. ë‰´ìŠ¤ ì¶”ê°€ í¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ê´€ë ¨ ë‰´ìŠ¤ ì¶”ê°€                     [X]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì œëª©: [_____________________________]       â”‚
â”‚ URL:  [_____________________________]       â”‚
â”‚ ì¶œì²˜: [í•œê²¨ë ˆ â–¼]                            â”‚
â”‚ ë‚ ì§œ: [2025-10-06]                          â”‚
â”‚ ìš”ì•½: [___________________________          â”‚
â”‚        ___________________________]         â”‚
â”‚ ê°ì •: [â—‹ ê¸ì • â—‹ ì¤‘ë¦½ â—‹ ë¶€ì •]              â”‚
â”‚                                             â”‚
â”‚ [ë‰´ìŠ¤ URLì—ì„œ ìë™ ì¶”ì¶œ] ë²„íŠ¼               â”‚
â”‚                                             â”‚
â”‚          [ì·¨ì†Œ]  [ì¶”ê°€]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¤– ë‰´ìŠ¤ ìë™ ìˆ˜ì§‘ (Phase 2)

### ë°©ë²• 1: RSS Feed
- ì£¼ìš” ì–¸ë¡ ì‚¬ RSS êµ¬ë…
- í‚¤ì›Œë“œ ê¸°ë°˜ í•„í„°ë§ (ê³µì•½ ì œëª©, í›„ë³´ìëª…)
- ì •ê¸°ì  í¬ë¡¤ë§ (Vercel Cron Jobs)

### ë°©ë²• 2: Google News API
- Google Custom Search API ì‚¬ìš©
- ê³µì•½ í‚¤ì›Œë“œë¡œ ê²€ìƒ‰
- ì¼ì¼ ì¿¼í„° ì œí•œ ê³ ë ¤

### ë°©ë²• 3: Supabase Edge Functions
```javascript
// Supabase Edge Function
export async function collectNews(pledgeId, keywords) {
  const searchQuery = keywords.join(' OR ');
  const newsResults = await fetch(
    `https://newsapi.org/v2/everything?q=${searchQuery}&language=ko`
  );

  const { articles } = await newsResults.json();

  for (const article of articles) {
    await supabase.from('pledge_news').insert({
      pledge_id: pledgeId,
      title: article.title,
      url: article.url,
      source: article.source.name,
      published_date: article.publishedAt,
      summary: article.description,
      created_by: 'bot'
    });
  }
}
```

---

## ğŸ“… êµ¬í˜„ ë¡œë“œë§µ

### Phase 1: ê¸°ë³¸ ê´€ë¦¬ ê¸°ëŠ¥ (ìš°ì„ )
1. âœ… ê³µì•½ 1ê°œ í›„ë³´ì í™•ì¸
2. âœ… Supabaseì— `pledge_news`, `admin_users`, `audit_log` í…Œì´ë¸” SQL ì‘ì„±
3. âœ… Admin ì „ìš© í˜ì´ì§€ ë¼ìš°íŒ… (`/admin`)
4. âœ… Admin Dashboard UI ê¸°ë³¸ êµ¬ì¡° ìƒì„±
5. âœ… SupabaseDataSourceì— ê³µì•½/ë‰´ìŠ¤ CRUD ë©”ì„œë“œ ì¶”ê°€
6. [ ] Supabaseì—ì„œ SQL ì‹¤í–‰ (í…Œì´ë¸” ìƒì„±)
7. [ ] Supabase Auth ë¡œê·¸ì¸ êµ¬í˜„
8. [ ] ê³µì•½ í¸ì§‘ ëª¨ë‹¬ UI êµ¬í˜„
9. [ ] ë‰´ìŠ¤ ì¶”ê°€ ëª¨ë‹¬ UI êµ¬í˜„
10. [ ] ê³µì•½ ì¶”ê°€ ê¸°ëŠ¥ êµ¬í˜„

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 6-8ì‹œê°„
**ì§„í–‰ ìƒí™©**: 5/10 ì™„ë£Œ (2025-10-06)

### Phase 2: ë‰´ìŠ¤ ìë™ ìˆ˜ì§‘ (ì„ íƒ)
1. [ ] ë‰´ìŠ¤ API ì—°ë™
2. [ ] Supabase Edge Functionìœ¼ë¡œ í¬ë¡¤ëŸ¬ êµ¬í˜„
3. [ ] Vercel Cron Jobsë¡œ ì •ê¸° ì‹¤í–‰

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 4-6ì‹œê°„

### Phase 3: ê³ ê¸‰ ê¸°ëŠ¥ (ì„ íƒ)
1. [ ] ê°ì • ë¶„ì„ (AI)
2. [ ] ë‰´ìŠ¤ ìš”ì•½ ìë™ ìƒì„±
3. [ ] ì¤‘ë³µ ë‰´ìŠ¤ í•„í„°ë§

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 8-10ì‹œê°„

---

## ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

1. **ì¸ì¦**
   - Supabase Auth (ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸)
   - Admin ì „ìš© ì´ë©”ì¼ í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸

2. **ê¶Œí•œ ê´€ë¦¬**
   - RLS ì •ì±…ìœ¼ë¡œ adminë§Œ ìˆ˜ì • ê°€ëŠ¥
   - viewerëŠ” ì½ê¸° ì „ìš©

3. **ê°ì‚¬ ë¡œê·¸**
   - ëª¨ë“  ë³€ê²½ì‚¬í•­ ê¸°ë¡
   - ëˆ„ê°€, ì–¸ì œ, ë¬´ì—‡ì„ ë³€ê²½í–ˆëŠ”ì§€ ì¶”ì 

---

## ğŸ’¡ ë‹¤ìŒ ë‹¨ê³„

**âœ… ì™„ë£Œëœ ì‘ì—… (2025-10-06):**

1. âœ… ê³µì•½ 1ê°œ í›„ë³´ì 5ëª… í™•ì¸
2. âœ… `scripts/create_admin_tables.sql` ì‘ì„± (pledge_news, admin_users, audit_log)
3. âœ… Admin í˜ì´ì§€ ë¼ìš°íŒ… ì¶”ê°€ (App.jsx)
4. âœ… AdminDashboard ì»´í¬ë„ŒíŠ¸ ìƒì„± (src/pages/AdminDashboard.jsx)
5. âœ… SupabaseDataSourceì— CRUD ë©”ì„œë“œ ì¶”ê°€:
   - createPledge, updatePledge, deletePledge
   - getNewsByPledge, createNews, updateNews, deleteNews, getAllNews

**â­ï¸ ë‹¤ìŒ ì‘ì—…:**

1. **Supabaseì—ì„œ SQL ì‹¤í–‰**
   - Supabase SQL Editor ì—´ê¸°
   - `scripts/create_admin_tables.sql` ë‚´ìš© ë³µì‚¬
   - ì‹¤í–‰í•˜ì—¬ í…Œì´ë¸” ìƒì„±

2. **ê³µì•½ í¸ì§‘ ëª¨ë‹¬ êµ¬í˜„**
   - PledgeEditModal ì»´í¬ë„ŒíŠ¸ ìƒì„±
   - ê³µì•½ ì œëª©, ë‚´ìš©, ë¶„ì•¼, ìƒíƒœ í¸ì§‘

3. **ë‰´ìŠ¤ ì¶”ê°€ ëª¨ë‹¬ êµ¬í˜„**
   - NewsAddModal ì»´í¬ë„ŒíŠ¸ ìƒì„±
   - ë‰´ìŠ¤ ì œëª©, URL, ì¶œì²˜, ë‚ ì§œ, ìš”ì•½ ì…ë ¥

4. **ê³µì•½ 1ê°œ í›„ë³´ì ë°ì´í„° ìˆ˜ì •**
   - Admin Dashboardì—ì„œ ê° í›„ë³´ìë³„ë¡œ ê³µì•½ ì¶”ê°€

**ì„ íƒí•œ ë°©ì‹: A) Supabase Admin Dashboard êµ¬í˜„ âœ…**
